//plugins {
    //id 'java'
    //id 'checkstyle'
    //id 'findbugs'
    //id 'jacoco'
    //id 'war'
//}

apply plugin: 'java'
apply plugin: 'checkstyle'
apply plugin: 'findbugs'
apply plugin: 'jacoco'
apply plugin: 'war'
apply plugin: 'maven-publish'

sourceCompatibility = JavaVersion.VERSION_1_8
targetCompatibility = JavaVersion.VERSION_1_8

group = 'jp.gihyo.jenkinsbook'
version = '1.0.0'
//ext {
//    artifactId = 'sampleproject'
//

repositories {
    mavenCentral()
    maven {
        url "http://nexus.dev.hoge.org:8000/content/groups/public"
    }
}

publishing {
    publications {
        jar(MavenPublication) {
            from components.java
        }
        war(MavenPublication) {
            from components.web
        }
    }
    repositories {
        maven {
            name "releases"
            url "http://nexus.dev.hoge.org:8000/content/repositories/releases"
            credentials {
                username repositoryUser
                password repositoryPass
            }
        }
        maven {
            name "snapshots"
            url "http://nexus.dev.hoge.org:8000/content/repositories/snapshots"
            credentials {
                username repositoryUser
                password repositoryPass
            }
        }
    }
}

dependencies {
    providedCompile 'javax.servlet:javax.servlet-api:3.1.0',
                    'javax.servlet.jsp:javax.servlet.jsp-api:2.3.1'
    testCompile 'junit:junit:4.11',
                'org.easymock:easymock:3.2'
    checkstyle 'com.puppycrawl.tools:checkstyle:5.5'
    findbugs 'com.google.code.findbugs:findbugs:3.0.0'
}

checkstyleMain {
    configFile = file('./config/checkstyle/sun_checks.xml')
    ignoreFailures = true
}

checkstyleTest {
    configFile = file('./config/checkstyle/sun_checks.xml')
    excludes = ['**/*']
}

findbugsMain {
    ignoreFailures = true
}

findbugsTest {
    ignoreFailures = true
}

test {
    ignoreFailures = true
}

jar {
    baseName = 'sampleproject'
    version = '1.0.0'
}

war {
    dependsOn check
    //baseName = project.ext.artifactId
    baseName = 'sampleproject'
    version = '1.0.0'
}

task wrapper(type: Wrapper) {
    gradleVersion = '2.2.1'
}
