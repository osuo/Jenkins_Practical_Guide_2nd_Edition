//plugins {
    //id 'java'
    //id 'checkstyle'
    //id 'findbugs'
    //id 'jacoco'
    //id 'war'
//}

apply plugin: 'java'
apply plugin: 'checkstyle'
apply plugin: 'findbugs'
apply plugin: 'jacoco'
apply plugin: 'war'
apply plugin: 'maven-publish'
apply plugin: 'eclipse'
apply plugin: 'eclipse-wtp'

sourceCompatibility = JavaVersion.VERSION_1_8
targetCompatibility = JavaVersion.VERSION_1_8

group = 'jp.gihyo.jenkinsbook'
version = '1.0.0-SNAPSHOT'

repositories {
    //mavenCentral()
    maven {
        url "http://nexus.hagi.home:8000/content/groups/public"
    }
}

publishing {
    publications {
        jar(MavenPublication) {
            from components.java
            artifactId = 'sampleproject'
        }
        war(MavenPublication) {
            from components.web
            artifactId = 'sampleproject'
        }
    }
    repositories {
        maven {
            name "releases"
            url "http://nexus.hoge.home:8000/content/repositories/releases"
            credentials {
                username repositoryUser
                password repositoryPass
            }
        }
        maven {
            name "snapshots"
            url "http://nexus.hoge.home:8000/content/repositories/snapshots"
            credentials {
                username repositoryUser
                password repositoryPass
            }
        }
    }
}

dependencies {
    providedCompile 'javax.servlet:javax.servlet-api:3.1.0',
                    'javax.servlet.jsp:javax.servlet.jsp-api:2.3.1'
    testCompile 'junit:junit:4.11',
                'org.easymock:easymock:3.2'
}

checkstyleMain {
    configFile = file('./config/checkstyle/sun_checks.xml')
    ignoreFailures = true
}

checkstyleTest {
    configFile = file('./config/checkstyle/sun_checks.xml')
    excludes = ['**/*']
}

findbugsMain {
    ignoreFailures = true
}

findbugsTest {
    ignoreFailures = true
}

test {
    ignoreFailures = true
}

jar {
    baseName = 'sampleproject'
}

war {
    dependsOn check
    baseName = 'sampleproject'
}

task wrapper(type: Wrapper) {
    gradleVersion = '2.2.1'
}

task debug << {
    println project.name
    println repositoryUser
    println repositoryPass
}
